<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="jquery.1.12.4.js"></script>
    <title>test</title>
</head>
<style>
* {
    padding:0;
    margin: 0;
}

    .com_tit {
		padding: 100px 0 80px;
		font-size: 70px;
		text-align: center;
	}

	.sec01 {
		background: #ddd;
	}

	.sec01 .content {
		font-size: 170px;
	}

	.sec01 .content .progress {
		position: fixed;
		left: 50%;
		top: 500px;
		width: 70%;
		height: 100px;
		margin-left: -35%;
		border: 1px solid #222;
		;
		text-align: center;
	}

	.sec01 .content .progress .bar {
		display: block;
		width: 0%;
		height: 100%;
		;
		background-color: #111;
	}

	.sec01 .content .progress .txt {
		font-size: 30px;
	}
</style>

<body>
    <div class="wrap">
        <section class="sec01">
            <h2 class="com_tit">스크롤 백분율 구하는 방법</h2>
            <article class="content">
                <div class="progress">
                    <span class="bar"></span>
                    <p class="txt">0%</p>
                </div>
                가<br>
                나<br>
                다<br>
                라<br>
                마<br>
                바<br>
                사<br>
                아<br>
                자<br>
                차<br>
                카<br>
                타<br>
                파<br>
                하<br>
            </article>
        </section>
    </div>
    <script type="text/javascript">
        $(function () {
            var text = $('.progress .txt');
            var progressBar = $('.progress .bar');

            function getPercent() {
                var scrollHeight = $('.sec01').height();
                var scrollRealHeight = (scrollHeight - $(window).height());
                var winScrollTop = $(window).scrollTop();
                var scrollPercent = (winScrollTop / scrollRealHeight) * 100; 
                var textPercent = Math.floor(scrollPercent);

                console.log(`${winScrollTop},  winScrollTop`);
                console.log(`${scrollRealHeight}, scrollRealHeight`);
                console.log(`${scrollPercent}, scrollPercent`);

                render(textPercent, scrollPercent);
            };

            function render(textPercent, scrollPercent) {
                text.text(textPercent + '%');

                progressBar.css({
                    width: scrollPercent + '%'
                });
            };

            function init() {
                getPercent();
            };

            $(window).scroll(function () {
                getPercent();
            });

            init();
        });

      
    </script>
</body>

</html>